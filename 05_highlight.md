
# 高亮处理

# 1、定义索引


```
PUT books
{
  "mappings": {
    "_doc": {
      "properties": {
        "title": {
          "type": "text",
          "fields": {
            "keyword": {
              "type": "keyword"
            }
          }
        }
      }
    }
  }
}
```

# 2、插入数据

```
PUT books/_doc/2
{
  "title":"Hadoop权 指南(第4版)+数据算法"
}

PUT books/_doc/3
{
  "title":"Spark与Hadoop大数据分析"
}

PUT books/_doc/4
{
  "title":"Hadoop + Spark 大数据巨量分析与机器"
}

PUT books/_doc/5
{
  "title":"Hadoop大数据开发基础 "
}

PUT books/_doc/1
{
  "title":"hadoop高级数据分析"
}



PUT books/_doc/6
{
  "title":"hadoop高级数据分析"
}

PUT books/_doc/111
{
  "title":"高级软卧是旅客列车席别中的一种，每个包厢拥有两名旅客（有部分包厢为单人间或四人间），一般来说高级软卧的型号都是19系列(如19A、19K、19T)，也有少数为18系列和24系列。包厢的另外一侧是一个沙发。配置相应的设施，干净舒适。高级软卧是我国列车席别第二高级的，票价也是第二贵的，多被编组于动卧列车（卧铺动车组）和国际列车。新型卧铺动车组的软卧采用纵向卧铺等结构。附：我国列车最高级的席位是高速动车组的商务座。目前高级软卧最普遍的出现在动卧列车上，车型为CRH1E型高级软卧车厢也出现在普通列车内，车型为RW19（RW为软卧的拼音，RW19系列为包厢车，高级软卧）RW19T、RW19K、RW25G（有三种涂装：RW19T通常为白色与藏蓝色相间涂装，挂在特快’直达列车上；RW25G为红色涂装，通常挂在快速列车上，RW19K为蓝色涂装（与25K相同）通常挂在特快旅客列车上，进藏列车为绿色涂装）、RW19A、RW19。多见于国际列车上。RW19K产品用途及特点RW19K高级软卧车是南车四方机车车辆股份有限公司为适应京沪RW19K型RW19K型(6张) 线高档旅客列车的要求，按《京沪线高档客车技术条件》设计制造的新型高档客车。该车中部两端各设1个四人软卧包间，中间设有6个带独立卫生间的二人包间（定员20人）。车辆走行部采用SW-160型转向架，F8型电空制动装置。采用车顶单元式空调机组，包间内采用隐藏式送风，设有旅客操纵的风量调节开关。包间内每个铺位设有1台.4液晶显示器，乘客可用耳机收听和收视列车播放的音、视频节目。此外，各包间与乘务员室之间设有专线电话，车上公共区域播放背景音乐并设有旅客信息显示系统。该型客车使用寿命30年，厂修期7.5年，在15年内车体钢结构无须挖补或截换。设计图纸编号为SFK218。该型客车具有安全、快速、平稳、豪华、舒适等特点"
}
```

# 3、高亮显示

```
GET books/_search
{
  "query":{
    "match": {
      "title": "高级"
    }
  },
  
   "highlight": {
    "pre_tags": [
      "<em>"
    ],
    "post_tags": [
      "</em>"
    ],
    "fields": {
      "title": {
        "number_of_fragments": 0,
        "fragment_size": 10
      }
    }
}
}
```

# 4、返回结果

主要制约参数：

1、如果 "number_of_fragments": 0,
 全字段高亮返回。
 
 如果不要分片段返回，设置为0即可。

2、如果 "number_of_fragments": 非零,
返回的分片段数目
 
3、
 "fragment_size": 100
 每个高亮分段的字节数。
 





